# macVideoModify
맥으로 영상 파일 정리하는 모든것

## ffmpeg 설치
```bash
$ brew install ffmpeg
```
이제 ffmpeg가 설치되는거야. 이것도 오래걸리지만 인내심을 가지고 기다리다 보면.. 나는 홈브루보다는 빠르게 설치가 됐어 ㅋㅋㅋ 보통 10분 정도 걸린다고 하니 참고해.

만약 내가 설치가 된건지 안된건지 잘 모르겠다? 하면 그냥 ffmpeg를 입력해봐. 그래서 버전 어쩌고저쩌고 막 뜨면 이미 설치된거야!

재설치하고싶다면 `brew reinstall ffmpeg`를, 삭제하고 싶다면 `brew uninstall ffmpeg`를 입력하면 된다고 하니 참고해줘.

## .mov to .mp4
```bash
$ ffmpeg -i my-video.mov -vcodec h264 -acodec mp2 my-video.mp4
```

## 자막 다운
```bash
$ ffmpeg -i "아까 복사한 주소" 다운받고싶은이름.srt 
```
자막도 ffmpeg로 다운받는게 엄청 쉬웠어. 나는 크롬+m3u8 기준으로 설명할게
- F12로 알아낸 m3u8 주소를 그대로 크롬 주소창에 붙여넣어주면 m3u8 파일이 다운로드될거야.
- 파일이 다운로드된 폴더(보통 '다운로드' 폴더에 들어가겠지?)로 간 다음, 해당 파일 위에서 두손가락으로 탭(오른쪽 버튼) - 다음으로 열기 - 파일 편집기 를 클릭해줘
- 그러면 영어로 뭐라뭐라 써져있는게 나올텐데, 우리가 찾아야할 것은 #EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subtitles-0" 로 시작하는 문장이야.
- 문장 맨 마지막에 보면 URI="~" 로 나오는 부분이 있어. 따옴표와 안에 있는 주소를 모두 복사해줘.
- 다시 터미널로 돌아와서 `ffmpeg -i "아까 복사한 주소" 다운받고싶은이름.srt`

입력하면 자막 파일 다운로드 가능해!!

★ 내가 파일을 여럿 다운받아보니.. 자막이 두줄로 나올 경우 순서가 뒤바뀌어 나오더라. 혹시 해결법을 아는 더쿠가 있다면 알려주라..ㅠㅠ

★ 간혹 복사한 주소 주변의 따옴표를 제외하고도 다운되는 경우가 있는거 같아.

★ smi는 위의 방식으로는 받아지지 않았어ㅠㅠ 확장자는 srt로 받아봐!

★ 사파리에서 m3u8 주소를 주소창에 입력하면 바로 영상이 뜨고 재생이 될텐데, 오른쪽 버튼 눌러서 '비디오 다운로드' 하면 m3u8 파일로 다운로드될거야. 

## YouTube-dl 설치
```bash 
$ brew install YouTube-dl
```
위 커맨드를 터미널에 입력하면 바로 설치가 될거야! ★★참고로 ffmpeg를 미리 설치해놓아야 영상과 소리를 하나로 합칠 수 있다고 하니 3을 보고 미리 설치해주자.

## YouTube-dl로 영상 짱.쉽.게. 다운로드 받기

내가 사용해보니 youtube-dl은 우회하지 않은 영상주소로도 다운로드가 됐어. 

터미널에 `YouTube-dl 영상주소` 입력하면 mp4로 바로 다운로드 됨!!!!!!!!!!! 

## YouTube-dl로 화질도 이것저것 선택하고 아무튼 더 좋게 다운로드 받기
```bash
YouTube-dl 영상주소 -F
```
(★F는 꼭 대문자여야돼) 

순서대로 format code/extension/resolution/note 인데, extension은 파일 확장자(mp4, m4a)이고 resolution은 해상도인걸 쉽게 확인할 수 있을거야.

우리는 이 중에서 확장자가 비디오 파일인 format code, 확장자가 오디오 파일인 format code를 조합해서 다운로드 받을거야.

내가 원하는 해상도를 확인하고 아래와 같이 터미널에 입력해줘.

```bash
Youtube-dl 영상주소 -f 비디오 파일 format code+오디오 파일 format code
```
(ex) youtube-dl 영상주소 -f hls-3170-0+dash-8458b0b5-77b4-44b8-87bf-a97dbbfca28b-0
★ 여기서 f는 꼭 소문자로 입력해줘야해
★ 비디오 파일과 오디오 파일 사이에 꼭 + 를 입력해줘야 조합되는거니까 + 잊지말자! 그리고 + 주변에 띄어쓰기 없어!!!! 띄어쓰면 인식 못하니까 꼭 띄어쓰기 없이 해줘야돼!!
★ 비디오 파일의 코드를 먼저 적어야한대. 만약 잘못 적을 경우 조합을 추천해주니까 그대로 붙여넣어도 돼.
★ 만약 저장된 곳을 찾지 못하겠다면 위와 마찬가지로 터미널에 open . 입력하면 저장된 곳의 파인더가 바로 열려!

## YouTube-dl로 자막 다운받기
```bash
$ YouTube-dl --write-sub --skip-download 영상주소
```

★ 기존에 있는 자막 추출에는 --write-sub을 사용하는게 가장 안전하게 추출되더라. 이 내용을 빼면 나는 파일이 늘 사라졌어(..)
★ --skip-download 는 영상 다운로드를 스킵하겠다는거야. 대신 이걸 쓰면 자막파일이 무조건 vtt로 다운로드 되어서, srt나 smi로 추가 변환이 필요해
★ 만약 srt로+영상 다운로드까지 한번에 하고싶다면 YouTube-dl --write-sub --convert-subs srt 와 같이 작성하면 다운로드가 된다니 참고해
★ 다운로드가 안된다면?! 자막이 아직 안 올라왔을수도 있어.. YouTube-dl --list-subs 영상주소 입력하면 자막 유무가 나와!

둘 다 사용해보니 경험상 속도는 ffmpeg가 더 빨랐어(youtube-dl은 영상+소리 머징이 오래 걸리더라) 그런데 쉬운건 YouTube-dl이 따로 우회도 안해도 되고 훨씬 편하긴 해 보고 있는 덬들이 좋은 쪽으로 선택해서 사용하면 될듯!

아무래도 맥이 찾아도 정보도 잘 안나오고 너무 전문가 포스가 느껴지는 내용이 많았어서 어려움을 겪었는데 여기 더쿠들의 친절한 도움 덕분에 나도 어떻게 잘 다운로드하게 되었어!! 한번 다운로드 성공하고 나니까 세상 쉬워.. 진짜... 한번 설치만 잘하면 된다. 코드도 쉬워서 대충 외워서 쓸수도 있음.. 핵편해



